@model StudentInfo
@{
    ViewBag.Title = "Create Student";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<div class="container mt-4">

    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Create Student</h4>
        </div>

        <div class="card-body">

            <form asp-controller="Student" asp-action="Create" method="post" enctype="multipart/form-data">

                <div class="row g-3">

                    <div class="col-md-4">
                        <label class="form-label">First Name *</label>
                        <input asp-for="FirstName" class="form-control" required />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Middle Name</label>
                        <input asp-for="MiddleName" class="form-control" />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Last Name *</label>
                        <input asp-for="LastName" class="form-control" required />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">DOB *</label>
                        <input asp-for="DOB" type="date" class="form-control" id="dob" required />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Age</label>
                        <input asp-for="Age" class="form-control bg-light" id="age" readonly />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Contact *</label>
                        <input asp-for="ContactNo" class="form-control" required />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Email *</label>
                        <input asp-for="Email" class="form-control" required />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Amount *</label>
                        <input asp-for="Amount" class="form-control" required />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Country *</label>
                        <select asp-for="CountryId" asp-items="ViewBag.Country" class="form-select" id="CountryId">
                            <option value="">Select Country</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">State *</label>
                        <select asp-for="StateId" class="form-select" id="StateId">
                            <option value="">Select State</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">City *</label>
                        <select asp-for="CityId" class="form-select" id="CityId">
                            <option value="">Select City</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Address</label>
                        <input asp-for="Address" class="form-control" />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Pincode</label>
                        <input asp-for="Pincode" class="form-control" />
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Image</label>
                        <input type="file" name="ImageFile" class="form-control" />
                    </div>

                </div>

                <hr />

                <div class="text-end">
                    <button type="submit" class="btn btn-success px-4">Save</button>
                    <a href="/Student/Index" class="btn btn-secondary px-4">Cancel</a>
                </div>

            </form>

        </div>
    </div>
</div>
<script>
    $(document).ready(function(){

        $("#dob").change(function(){
            var dob = new Date($(this).val());
            var today = new Date();
            var age = today.getFullYear() - dob.getFullYear();
            $("#age").val(age);
        });

        $("#CountryId").change(function () {
            var countryId = $(this).val();

            $.get('/Student/GetStates', { countryId: countryId }, function (data) {
                $("#StateId").html(data);
                $("#CityId").html('<option value="">Select City</option>');
            });
        });

        $("#StateId").change(function () {
            var stateId = $(this).val();

            $.get('/Student/GetCities', { stateId: stateId }, function (data) {
                $("#CityId").html(data);
            });
        });

    });
</script>
